{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/rapha/Documents/GitHub/SamuelBrettWilliamsWeb/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/rapha/Documents/GitHub/SamuelBrettWilliamsWeb/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/rapha/Documents/GitHub/SamuelBrettWilliamsWeb/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import{useSearchParams}from'react-router-dom';import'../styles/PasswordReset.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var PasswordReset=function PasswordReset(){var _useState=useState(),_useState2=_slicedToArray(_useState,2),password=_useState2[0],setPassword=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),passwordConfirm=_useState4[0],setPasswordConfirm=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),notMatched=_useState6[0],setNotMatched=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),error=_useState8[0],setError=_useState8[1];var _useSearchParams=useSearchParams(),_useSearchParams2=_slicedToArray(_useSearchParams,2),searchParams=_useSearchParams2[0],setSearchParams=_useSearchParams2[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),message=_useState10[0],setMessage=_useState10[1];console.log(searchParams.get('token'));var passwordConfirmHandler=function passwordConfirmHandler(e){if(e.target.value!==password){setNotMatched(true);}else{setNotMatched(false);}setPasswordConfirm(e.target.value);};var submitHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();fetch('/api/reset-password',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({token:searchParams.get('token'),password:password})}).then(function(response){return response.json();}).then(function(data){console.log(data);setMessage('Password changed successfully!');return alert('Password changed successfully!');}).catch(function(error){console.error('Error changing password:',error);setMessage('Error: Password could not be changed');});case 2:case\"end\":return _context.stop();}},_callee);}));return function submitHandler(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"section\",{className:\"password-reset\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"admin_content\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"admin_title\",children:\"Password Reset\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"admin_form\",onSubmit:submitHandler,children:[/*#__PURE__*/_jsx(\"input\",{className:\"admin_input newPass\",type:\"password\",onChange:function onChange(e){return setPassword(e.target.value);},placeholder:\"New password\"}),/*#__PURE__*/_jsx(\"input\",{className:\"admin_input confirm-pass\",type:\"password\",onChange:passwordConfirmHandler,placeholder:\"Confirm new password\"}),notMatched&&/*#__PURE__*/_jsx(\"label\",{className:\"reset-password_notmatched\",children:\"Password does not match!\"}),/*#__PURE__*/_jsx(\"div\",{className:\"forgot-pass-button\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Submit\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"changed-pass\",children:message})]})]})});};export default PasswordReset;","map":{"version":3,"names":["React","useState","useSearchParams","PasswordReset","password","setPassword","passwordConfirm","setPasswordConfirm","notMatched","setNotMatched","error","setError","searchParams","setSearchParams","message","setMessage","console","log","get","passwordConfirmHandler","e","target","value","submitHandler","preventDefault","fetch","method","headers","body","JSON","stringify","token","then","response","json","data","alert","catch"],"sources":["C:/Users/rapha/Documents/GitHub/SamuelBrettWilliamsWeb/frontend/src/components/PasswordReset.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useSearchParams } from 'react-router-dom';\r\n\r\nimport '../styles/PasswordReset.css';\r\n\r\nconst PasswordReset = () => {\r\n\tconst [password, setPassword] = useState();\r\n\tconst [passwordConfirm, setPasswordConfirm] = useState();\r\n\tconst [notMatched, setNotMatched] = useState(false);\r\n\tconst [error, setError] = useState('');\r\n\r\n\tconst [searchParams, setSearchParams] = useSearchParams();\r\n\tconst [message, setMessage] = useState('');\r\n\r\n\tconsole.log(searchParams.get('token'));\r\n\r\n\tconst passwordConfirmHandler = (e) => {\r\n\t\tif (e.target.value !== password) {\r\n\t\t\tsetNotMatched(true);\r\n\t\t} else {\r\n\t\t\tsetNotMatched(false);\r\n\t\t}\r\n\t\tsetPasswordConfirm(e.target.value);\r\n\t};\r\n\r\n\tconst submitHandler = async (e) => {\r\n\t\te.preventDefault();\r\n\r\n\t\tfetch('/api/reset-password', {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify({\r\n                token: searchParams.get('token'),\r\n\t\t\t\tpassword: password\r\n            })\r\n        })\r\n\t\t.then(response => response.json())\r\n\t\t.then(data => {\r\n\t\t\tconsole.log(data);\r\n\t\t\tsetMessage('Password changed successfully!');\r\n\t\t\treturn alert('Password changed successfully!');\r\n\t\t})\r\n\t\t.catch(error => {\r\n\t\t\tconsole.error('Error changing password:', error);\r\n\t\t\tsetMessage('Error: Password could not be changed');\r\n\t\t});\r\n\t};\r\n\t\r\n\treturn (\r\n\t\t<section className='password-reset'>\r\n\t\t\t<div className='admin_content'>\r\n\t\t\t\t<h3 className='admin_title'>Password Reset</h3>\r\n\r\n\t\t\t\t<form className='admin_form' onSubmit={submitHandler}>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tclassName=\"admin_input newPass\"\r\n\t\t\t\t\t\ttype='password'\r\n\t\t\t\t\t\tonChange={(e) => setPassword(e.target.value)}\r\n\t\t\t\t\t\tplaceholder='New password'\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tclassName='admin_input confirm-pass'\r\n\t\t\t\t\t\ttype='password'\r\n\t\t\t\t\t\tonChange={passwordConfirmHandler}\r\n\t\t\t\t\t\tplaceholder='Confirm new password'\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t{notMatched && (\r\n\t\t\t\t\t\t<label className='reset-password_notmatched'>\r\n\t\t\t\t\t\t\tPassword does not match!\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t<div className=\"forgot-pass-button\">\r\n\t\t\t\t\t\t<button type='submit'>Submit</button>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<p className='changed-pass'>{message}</p>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t</section>\r\n\t);\r\n};\r\n\r\nexport default PasswordReset;\r\n"],"mappings":"+cAAA,MAAOA,MAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,OAASC,eAAe,KAAQ,kBAAkB,CAElD,MAAO,6BAA6B,CAAC,wFAErC,GAAMC,cAAa,CAAG,QAAhBA,cAAa,EAAS,CAC3B,cAAgCF,QAAQ,EAAE,wCAAnCG,QAAQ,eAAEC,WAAW,eAC5B,eAA8CJ,QAAQ,EAAE,yCAAjDK,eAAe,eAAEC,kBAAkB,eAC1C,eAAoCN,QAAQ,CAAC,KAAK,CAAC,yCAA5CO,UAAU,eAAEC,aAAa,eAChC,eAA0BR,QAAQ,CAAC,EAAE,CAAC,yCAA/BS,KAAK,eAAEC,QAAQ,eAEtB,qBAAwCT,eAAe,EAAE,sDAAlDU,YAAY,sBAAEC,eAAe,sBACpC,eAA8BZ,QAAQ,CAAC,EAAE,CAAC,0CAAnCa,OAAO,gBAAEC,UAAU,gBAE1BC,OAAO,CAACC,GAAG,CAACL,YAAY,CAACM,GAAG,CAAC,OAAO,CAAC,CAAC,CAEtC,GAAMC,uBAAsB,CAAG,QAAzBA,uBAAsB,CAAIC,CAAC,CAAK,CACrC,GAAIA,CAAC,CAACC,MAAM,CAACC,KAAK,GAAKlB,QAAQ,CAAE,CAChCK,aAAa,CAAC,IAAI,CAAC,CACpB,CAAC,IAAM,CACNA,aAAa,CAAC,KAAK,CAAC,CACrB,CACAF,kBAAkB,CAACa,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC,CACnC,CAAC,CAED,GAAMC,cAAa,4FAAG,iBAAOH,CAAC,mHAC7BA,CAAC,CAACI,cAAc,EAAE,CAElBC,KAAK,CAAC,qBAAqB,CAAE,CACnBC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACL,cAAc,CAAE,kBACpB,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CACjBC,KAAK,CAAEnB,YAAY,CAACM,GAAG,CAAC,OAAO,CAAC,CAC5Cd,QAAQ,CAAEA,QACF,CAAC,CACL,CAAC,CAAC,CACP4B,IAAI,CAAC,SAAAC,QAAQ,QAAIA,SAAQ,CAACC,IAAI,EAAE,GAAC,CACjCF,IAAI,CAAC,SAAAG,IAAI,CAAI,CACbnB,OAAO,CAACC,GAAG,CAACkB,IAAI,CAAC,CACjBpB,UAAU,CAAC,gCAAgC,CAAC,CAC5C,MAAOqB,MAAK,CAAC,gCAAgC,CAAC,CAC/C,CAAC,CAAC,CACDC,KAAK,CAAC,SAAA3B,KAAK,CAAI,CACfM,OAAO,CAACN,KAAK,CAAC,0BAA0B,CAAEA,KAAK,CAAC,CAChDK,UAAU,CAAC,sCAAsC,CAAC,CACnD,CAAC,CAAC,CAAC,qDACH,kBAvBKQ,cAAa,4CAuBlB,CAED,mBACC,gBAAS,SAAS,CAAC,gBAAgB,uBAClC,aAAK,SAAS,CAAC,eAAe,wBAC7B,WAAI,SAAS,CAAC,aAAa,UAAC,gBAAc,EAAK,cAE/C,cAAM,SAAS,CAAC,YAAY,CAAC,QAAQ,CAAEA,aAAc,wBACpD,cACC,SAAS,CAAC,qBAAqB,CAC/B,IAAI,CAAC,UAAU,CACf,QAAQ,CAAE,kBAACH,CAAC,QAAKf,YAAW,CAACe,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC,EAAC,CAC7C,WAAW,CAAC,cAAc,EACzB,cACF,cACC,SAAS,CAAC,0BAA0B,CACpC,IAAI,CAAC,UAAU,CACf,QAAQ,CAAEH,sBAAuB,CACjC,WAAW,CAAC,sBAAsB,EACjC,CAEDX,UAAU,eACV,cAAO,SAAS,CAAC,2BAA2B,UAAC,0BAE7C,EACA,cACD,YAAK,SAAS,CAAC,oBAAoB,uBAClC,eAAQ,IAAI,CAAC,QAAQ,UAAC,QAAM,EAAS,EAChC,cAEN,UAAG,SAAS,CAAC,cAAc,UAAEM,OAAO,EAAK,GACnC,GACF,EACG,CAEZ,CAAC,CAED,cAAeX,cAAa"},"metadata":{},"sourceType":"module","externalDependencies":[]}