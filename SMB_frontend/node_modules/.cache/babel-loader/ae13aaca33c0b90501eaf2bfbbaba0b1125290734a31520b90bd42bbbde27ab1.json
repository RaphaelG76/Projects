{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/rapha/Documents/GitHub/SamuelBrettWilliamsWeb/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/rapha/Documents/GitHub/SamuelBrettWilliamsWeb/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/rapha/Documents/GitHub/SamuelBrettWilliamsWeb/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import'../styles/Admin.css';import{NavLink}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Admin(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),errorMessage=_useState6[0],setErrorMessage=_useState6[1];var handleEmailChange=function handleEmailChange(event){setEmail(event.target.value);};var handlePasswordChange=function handlePasswordChange(event){setPassword(event.target.value);};var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){var emailAddress;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:event.preventDefault();emailAddress=email.match(/[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}/);fetch(\"http://localhost:3000/login\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({email:emailAddress[0],password:password})}).then(function(response){if(response.status===401){window.location.replace(\"http://localhost:3000/#/admin_login\");response.json().then(function(data){setErrorMessage(data.message);});}else if(response.ok){window.location.replace(\"http://localhost:3000/#/\");}else{throw new Error(\"HTTP error! status: \".concat(response.status));}}).catch(function(error){console.error(error);});case 3:case\"end\":return _context.stop();}},_callee);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"section\",{className:\"admin\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"admin__content\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"admin__title\",children:\"Admin Login\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"admin__form\",onSubmit:handleSubmit,children:[errorMessage&&/*#__PURE__*/_jsx(\"div\",{children:errorMessage}),/*#__PURE__*/_jsx(\"input\",{className:\"admin__input admin__input--email\",placeholder:\"Username or Email Address\",type:\"email\",value:email,onChange:handleEmailChange}),/*#__PURE__*/_jsx(\"input\",{className:\"admin__input admin__input--password\",placeholder:\"Password\",type:\"password\",value:password,onChange:handlePasswordChange}),/*#__PURE__*/_jsxs(\"div\",{className:\"admin__form-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-submit\",type:\"submit\",children:\"Login\"}),/*#__PURE__*/_jsx(NavLink,{to:\"/forgot_password\",children:\"Forgot password\"})]})]})]})});}","map":{"version":3,"names":["React","useState","NavLink","Admin","email","setEmail","password","setPassword","errorMessage","setErrorMessage","handleEmailChange","event","target","value","handlePasswordChange","handleSubmit","preventDefault","emailAddress","match","fetch","method","headers","body","JSON","stringify","then","response","status","window","location","replace","json","data","message","ok","Error","catch","error","console"],"sources":["C:/Users/rapha/Documents/GitHub/SamuelBrettWilliamsWeb/frontend/src/pages/Admin.js"],"sourcesContent":["\r\nimport React, {useState} from \"react\"\r\nimport '../styles/Admin.css'\r\nimport {NavLink} from 'react-router-dom'\r\n\r\nexport default function Admin() {\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [errorMessage, setErrorMessage] = useState('');\r\n\r\n  const handleEmailChange = (event) => {\r\n    setEmail(event.target.value);\r\n  };\r\n\r\n  const handlePasswordChange = (event) => {\r\n    setPassword(event.target.value);\r\n  };\r\n\r\n  const handleSubmit = async (event) => {\r\n    event.preventDefault();\r\n    const emailAddress = email.match(/[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}/);\r\n\r\n    fetch(\"http://localhost:3000/login\", {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\"\r\n      },\r\n      body: JSON.stringify({\r\n        email: emailAddress[0],\r\n        password: password\r\n      })\r\n    })\r\n    .then(function(response) {\r\n      if (response.status === 401) {\r\n        window.location.replace(\"http://localhost:3000/#/admin_login\");\r\n        response.json().then(data => {\r\n          setErrorMessage(data.message);\r\n        });\r\n      } else if (response.ok) {\r\n        window.location.replace(\"http://localhost:3000/#/\");\r\n      } else {\r\n        throw new Error(`HTTP error! status: ${response.status}`);\r\n      }\r\n    })\r\n    .catch(function(error) {\r\n      console.error(error);\r\n    });\r\n  }\r\n\r\n  return (\r\n      <section className='admin'>\r\n          <div className=\"admin__content\">\r\n              <h3 className=\"admin__title\">Admin Login</h3>\r\n              <form className=\"admin__form\" onSubmit={handleSubmit}>\r\n                  {errorMessage && <div>{errorMessage}</div>}\r\n                  <input className=\"admin__input admin__input--email\" placeholder=\"Username or Email Address\" type=\"email\" value={email} onChange={handleEmailChange}/>\r\n                  <input className=\"admin__input admin__input--password\" placeholder=\"Password\" type=\"password\" value={password} onChange={handlePasswordChange} />\r\n                  <div className=\"admin__form-actions\">\r\n                    <button className=\"btn btn-submit\" type=\"submit\">Login</button>\r\n                    <NavLink to='/forgot_password'>Forgot password</NavLink>\r\n                  </div>\r\n              </form>\r\n          </div>\r\n      </section>\r\n  )\r\n}\r\n"],"mappings":"+cACA,MAAOA,MAAK,EAAGC,QAAQ,KAAO,OAAO,CACrC,MAAO,qBAAqB,CAC5B,OAAQC,OAAO,KAAO,kBAAkB,yFAExC,cAAe,SAASC,MAAK,EAAG,CAC9B,cAA0BF,QAAQ,CAAC,EAAE,CAAC,wCAA/BG,KAAK,eAAEC,QAAQ,eACtB,eAAgCJ,QAAQ,CAAC,EAAE,CAAC,yCAArCK,QAAQ,eAAEC,WAAW,eAC5B,eAAwCN,QAAQ,CAAC,EAAE,CAAC,yCAA7CO,YAAY,eAAEC,eAAe,eAEpC,GAAMC,kBAAiB,CAAG,QAApBA,kBAAiB,CAAIC,KAAK,CAAK,CACnCN,QAAQ,CAACM,KAAK,CAACC,MAAM,CAACC,KAAK,CAAC,CAC9B,CAAC,CAED,GAAMC,qBAAoB,CAAG,QAAvBA,qBAAoB,CAAIH,KAAK,CAAK,CACtCJ,WAAW,CAACI,KAAK,CAACC,MAAM,CAACC,KAAK,CAAC,CACjC,CAAC,CAED,GAAME,aAAY,4FAAG,iBAAOJ,KAAK,oIAC/BA,KAAK,CAACK,cAAc,EAAE,CAChBC,YAAY,CAAGb,KAAK,CAACc,KAAK,CAAC,gDAAgD,CAAC,CAElFC,KAAK,CAAC,6BAA6B,CAAE,CACnCC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACP,cAAc,CAAE,kBAClB,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CACnBpB,KAAK,CAAEa,YAAY,CAAC,CAAC,CAAC,CACtBX,QAAQ,CAAEA,QACZ,CAAC,CACH,CAAC,CAAC,CACDmB,IAAI,CAAC,SAASC,QAAQ,CAAE,CACvB,GAAIA,QAAQ,CAACC,MAAM,GAAK,GAAG,CAAE,CAC3BC,MAAM,CAACC,QAAQ,CAACC,OAAO,CAAC,qCAAqC,CAAC,CAC9DJ,QAAQ,CAACK,IAAI,EAAE,CAACN,IAAI,CAAC,SAAAO,IAAI,CAAI,CAC3BvB,eAAe,CAACuB,IAAI,CAACC,OAAO,CAAC,CAC/B,CAAC,CAAC,CACJ,CAAC,IAAM,IAAIP,QAAQ,CAACQ,EAAE,CAAE,CACtBN,MAAM,CAACC,QAAQ,CAACC,OAAO,CAAC,0BAA0B,CAAC,CACrD,CAAC,IAAM,CACL,KAAM,IAAIK,MAAK,+BAAwBT,QAAQ,CAACC,MAAM,EAAG,CAC3D,CACF,CAAC,CAAC,CACDS,KAAK,CAAC,SAASC,KAAK,CAAE,CACrBC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC,CACtB,CAAC,CAAC,CAAC,qDACJ,kBA7BKtB,aAAY,4CA6BjB,CAED,mBACI,gBAAS,SAAS,CAAC,OAAO,uBACtB,aAAK,SAAS,CAAC,gBAAgB,wBAC3B,WAAI,SAAS,CAAC,cAAc,UAAC,aAAW,EAAK,cAC7C,cAAM,SAAS,CAAC,aAAa,CAAC,QAAQ,CAAEA,YAAa,WAChDP,YAAY,eAAI,qBAAMA,YAAY,EAAO,cAC1C,cAAO,SAAS,CAAC,kCAAkC,CAAC,WAAW,CAAC,2BAA2B,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAEJ,KAAM,CAAC,QAAQ,CAAEM,iBAAkB,EAAE,cACrJ,cAAO,SAAS,CAAC,qCAAqC,CAAC,WAAW,CAAC,UAAU,CAAC,IAAI,CAAC,UAAU,CAAC,KAAK,CAAEJ,QAAS,CAAC,QAAQ,CAAEQ,oBAAqB,EAAG,cACjJ,aAAK,SAAS,CAAC,qBAAqB,wBAClC,eAAQ,SAAS,CAAC,gBAAgB,CAAC,IAAI,CAAC,QAAQ,UAAC,OAAK,EAAS,cAC/D,KAAC,OAAO,EAAC,EAAE,CAAC,kBAAkB,UAAC,iBAAe,EAAU,GACpD,GACH,GACL,EACA,CAEhB"},"metadata":{},"sourceType":"module","externalDependencies":[]}