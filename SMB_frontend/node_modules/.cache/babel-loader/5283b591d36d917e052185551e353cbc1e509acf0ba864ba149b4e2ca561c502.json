{"ast":null,"code":"import _slicedToArray from\"C:/Users/rapha/Documents/GitHub/SamuelBrettWilliamsWeb/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import'../styles/Play.css';import{Link}from'react-router-dom';import{useState,useEffect}from'react';import Authenticate from'../components/Authenticate.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Play(props){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),showConfirm=_useState8[0],setShowConfirm=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),authenticated=_useState10[0],setAuthenticated=_useState10[1];var title=encodeURIComponent(props.title);useEffect(function(){fetch(\"/api/plays?search=\".concat(title)).then(function(res){return res.json();}).then(function(data){}).catch(function(error){console.error(\"Error fetching data: \",error);setError(error);}).finally(function(){setLoading(false);});},[]);var handleDelete=function handleDelete(){fetch(\"/api/delete/play?id=\".concat(props.id)).then(function(response){return response.json();}).catch(function(error){console.error(error);});window.location.reload();};var handleConfirm=function handleConfirm(){setShowConfirm(false);handleDelete();};var handleCancel=function handleCancel(){setShowConfirm(false);};if(loading)return/*#__PURE__*/_jsx(\"div\",{className:\"page\",children:\"Loading...\"});if(error)return/*#__PURE__*/_jsx(\"div\",{className:\"page\",children:\"Error!\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"play\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Link,{to:\"/playdetails/\".concat(props.title),state:{title:props.title,cover:props.photo,writer:props.writer,photos:props.still_photos,duration:props.type_play,synopsis:props.description,production:props.productions,development:props.development,videos:props.videos,buy_links:props.buy_links,id:props.id},children:[/*#__PURE__*/_jsx(\"img\",{className:\"playImg\",src:props.photo}),\" \"]})}),/*#__PURE__*/_jsxs(\"span\",{className:\"playTitle\",children:[\" \",props.title,\" \"]}),/*#__PURE__*/_jsxs(\"span\",{className:\"playDuration\",children:[\" \",props.type_play,\" \"]}),/*#__PURE__*/_jsx(Authenticate,{setAuthen:setAuthenticated}),authenticated?/*#__PURE__*/_jsxs(\"div\",{className:\"delete-button\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"delete-feature\",onClick:function onClick(){return setShowConfirm(true);},children:\"Delete\"}),showConfirm&&/*#__PURE__*/_jsx(\"div\",{className:\"popup\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"popup-inner-upcomingAdd\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"popup-header\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"Are you sure you want to delete this play?\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"popup-content\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"popup-deleteFeature\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"confirm-buttons\",onClick:handleConfirm,children:\"Yes\"}),/*#__PURE__*/_jsx(\"button\",{className:\"confirm-buttons\",onClick:handleCancel,children:\"No\"})]})})]})})]}):null]});}export default Play;","map":{"version":3,"names":["React","Link","useState","useEffect","Authenticate","Play","props","data","setData","loading","setLoading","error","setError","showConfirm","setShowConfirm","authenticated","setAuthenticated","title","encodeURIComponent","fetch","then","res","json","catch","console","finally","handleDelete","id","response","window","location","reload","handleConfirm","handleCancel","cover","photo","writer","photos","still_photos","duration","type_play","synopsis","description","production","productions","development","videos","buy_links"],"sources":["C:/Users/rapha/Documents/GitHub/SamuelBrettWilliamsWeb/frontend/src/components/Play.js"],"sourcesContent":["import React from 'react'\r\nimport '../styles/Play.css'\r\nimport { Link } from 'react-router-dom'\r\nimport { useState, useEffect } from 'react'\r\nimport Authenticate from '../components/Authenticate.js';\r\n\r\nfunction Play(props) {\r\n  const [data, setData] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [showConfirm, setShowConfirm] = useState(false);\r\n  const [authenticated, setAuthenticated] = useState();\r\n\r\n  const title = encodeURIComponent(props.title);\r\n\r\n  useEffect(() => {\r\n    fetch(`/api/plays?search=${title}`)\r\n      .then((res) => res.json())\r\n      .then((data) => {})\r\n      .catch(error => {\r\n        console.error(\"Error fetching data: \", error);\r\n        setError(error);\r\n      })\r\n      .finally(() => {\r\n        setLoading(false);\r\n      })\r\n  }, [])\r\n\r\n  const handleDelete = () => {\r\n    fetch(`/api/delete/play?id=${props.id}`)\r\n      .then(response => response.json())\r\n      .catch(error => {\r\n        console.error(error);\r\n      });\r\n    window.location.reload();\r\n  };\r\n\r\n  const handleConfirm = () => {\r\n    setShowConfirm(false);\r\n    handleDelete();\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    setShowConfirm(false);\r\n  };\r\n\r\n  if (loading) return <div className=\"page\">Loading...</div>;\r\n  if (error) return <div className=\"page\">Error!</div>;\r\n\r\n  return (\r\n\r\n    <div className=\"play\">\r\n      <div>\r\n        <Link to={`/playdetails/${props.title}`} state={{\r\n          title: props.title,\r\n          cover: props.photo,\r\n          writer: props.writer,\r\n          photos: props.still_photos,\r\n          duration: props.type_play,\r\n          synopsis: props.description,\r\n          production: props.productions,\r\n          development: props.development,\r\n          videos: props.videos,\r\n          buy_links: props.buy_links,\r\n          id: props.id,\r\n        }} ><img className=\"playImg\" src={props.photo} /> </Link>\r\n      </div>\r\n      <span className=\"playTitle\"> {props.title} </span>\r\n      <span className=\"playDuration\"> {props.type_play} </span>\r\n      <Authenticate setAuthen={setAuthenticated}/>\r\n        {authenticated ? (\r\n          <div className='delete-button'>\r\n            <button className=\"delete-feature\" onClick={() => setShowConfirm(true)}>Delete</button>\r\n            {showConfirm && (\r\n              <div className = \"popup\">\r\n                <div className = \"popup-inner-upcomingAdd\">\r\n                  <div className=\"popup-header\">\r\n                    <h2>Are you sure you want to delete this play?</h2>\r\n                  </div>\r\n                  <div className=\"popup-content\">\r\n                    <div className=\"popup-deleteFeature\">\r\n                      <button className=\"confirm-buttons\" onClick={handleConfirm}>Yes</button>\r\n                      <button className=\"confirm-buttons\" onClick={handleCancel}>No</button>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        ) : (null)}\r\n    </div>\r\n\r\n  )\r\n}\r\n\r\nexport default Play"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}